<script setup lang="ts">
	import gsap from "gsap"

	interface Props {
		width?: string
		height?: string
	}

	const { width = "24px", height = "24px" } = defineProps<Props>()

	const rope = ref<HTMLElement | null>(null)

	onMounted(() => {
		rope.value = document.querySelector(".rope")

		const introAnim = gsap.timeline({ paused: true })
		introAnim.from(
			rope.value,
			{
				duration: 2,
				attr: {
					d: "M251.2 547.7c-12.7.7-23.2-1.8-33.1-1.7-12.5.1-11.5 11.8-10.1 24.2 8 72.1 38.5 293.3 63 397.8 29.3 124.7 110.9 275.8 315 215.3s282.2-314.6 298.1-421.8C900 654.3 993.4 402.9 993.4 402.9s14.8-34-30.9-14.9",
				},
			},
			0
		)

		const nextAnim = gsap.timeline({ paused: true })
		nextAnim.to(
			rope.value,
			{
				duration: 3,
				attr: {
					d: "M251.2 547.7c-15.7.7-23.2-1.8-53.1-1.7-12.5.1-11.5 11.8-10.1 14.2 8 92.1 38.5 293.3 63 397.8 29.3 124.7 10.9 275.8 415 215.3s282.2-314.6 298.1-421.8C900 454.3 993.4 402.9 993.4 402.9s14.8-34-30.9-14.9",
				},
				repeat: 1,
				yoyo: true,
				ease: "Power1.easeInOut",
			},
			0.5
		)

		const fullanim = gsap.timeline({ paused: true })
		fullanim.add(introAnim.play(), 0)
		fullanim.add(nextAnim.repeat(-1).play(), 3)

		fullanim.play()
	})
</script>

<template>
	<svg
		xmlns="http://www.w3.org/2000/svg"
		viewBox="0 0 1310 1363"
		:width="width"
		:height="height"
	>
		<g
			fill="none"
			fill-rule="evenodd"
		>
			<path
				fill="#F1F2F7"
				fill-rule="nonzero"
				d="M23.5 772.7S-4.2 712 59.4 670c63.6-42 169.8 68.8 251.5-8.8 81.7-77.6 58.5-73.2 98.6-160.3 40.1-87.1 177.5-124.1 318.7-61.3s97.5-27.3 265.1-26.3c167.5 1 90.3 394.5-131.8 447.4-222.1 52.9-352.7 156.6-448.7 193-96.1 36.5-326.4-130.8-389.3-281Z"
			/>
			<path
				stroke="#CED5E5"
				stroke-linecap="round"
				stroke-linejoin="round"
				stroke-width="3"
				d="M364.5 1231.9h484.1M42 1231.9h165.1M222.3 1231.9h36.2"
			/>
			<path
				fill="#FFDFD7"
				fill-rule="nonzero"
				d="M307.5 532.6s-25.8-4.9-30.4-5.2c-3-.2-46.1 12.3-46.1 12.3l-2 5.7-2.9 8.4s-3.5 15.9 15.4 15.6c18.9-.2 54.5-14.4 54.5-14.4l11.5-22.4ZM902.8 396.4s22.2-14.1 26.3-16.1c2.8-1.3 47.4-5.6 47.4-5.6l3.9 4.6 5.8 6.7s9.1 13.5-8.5 20.2c-17.6 6.7-55.9 6.7-55.9 6.7l-19-16.5Z"
			/>

			<path
				class="rope"
				stroke="#5900CC"
				stroke-linecap="round"
				stroke-linejoin="round"
				stroke-width="8"
				d="M251.2 547.7c-12.7.7-23.2-1.8-33.1-1.7-12.5.1-11.5 11.8-10.1 24.2 8 72.1 38.5 293.3 63 397.8 29.3 124.7 110.9 275.8 315 215.3s282.2-314.6 298.1-421.8C900 654.3 993.4 402.9 993.4 402.9s14.8-34-30.9-14.9"
			/>
			<path
				fill="#FE8163"
				fill-rule="nonzero"
				d="M517.6 333.1c-.9.2 8.9-37-1.5-60-10.4-23.1 16-70.2 46.4-46.6l4.5 42.7s-14.8 57-49.4 63.9Z"
			/>
			<path
				fill="#5900CC"
				fill-rule="nonzero"
				d="m476.1 1204.3-31.5 41.3s16.2 74.1 83.3 83.6c0 0 6.5-27.2-2.4-42.3-7.9-13.4-31.6-37.8-40.3-43.3l13.7-10.8-22.8-28.5Z"
			/>
			<path
				fill="#FFDFD7"
				fill-rule="nonzero"
				d="m587 389.8 11.6-48.7 19.2 5.5 2.4 46.2v28.6l-18.4 7s-13.9-13.2-14-13.8c-.1-.6-.8-24.8-.8-24.8Z"
			/>
			<path
				fill="#52CB96"
				fill-rule="nonzero"
				d="M544.6 685.8s-17.3 62.6 0 121.1c17.3 58.5 45.7 118.9 45.7 118.9s-109.7 139.4-123 281.6l35.2 29.9s146.4-235.1 158.8-268.9c12.4-33.7-28.4-254.7-28.4-254.7l-4-42.1-80.7 4.9-3.6 9.3Z"
			/>
			<path
				fill="#52CB96"
				fill-rule="nonzero"
				d="M685.3 667.6s59.5 197 67.4 252c8 55 7.1 348.7 7.1 348.7h-50.6s-36.4-198.8-24-300.4l-31.5-125.6-39.5-169.9 71.1-4.8Z"
			/>
			<path
				fill="#FFC933"
				fill-rule="nonzero"
				d="m294.4 558 14.2-27.5 13.3 3.5s4.6-6.2 14-4.9c9.5 1.3 116.8 28.8 116.8 28.8S540 405.6 586.6 389.6c0 0 18 5.5 26.2 30.2 0 0 4.7-12 7.5-27.1 0 0 24 1.6 65 43.5s78.3 59.9 78.3 59.9 93.2-81.9 103.4-88.7c10.2-6.9 18.6-5.1 18.6-5.1l14.9-9.8 27.1 24.8-10.1 8.3s4.1 7.1-.6 13c-4.7 5.9-143.7 120.1-153.5 125.1-9.8 5-99.7-72.8-99.7-72.8s38.9 159.7 18.5 159.1l-6.8 5.8-127.2 6.2v-2.6s-7.5-5.1-4.4-27.7c3.1-22.6 18.2-139.3 18.2-139.3s-75.9 102.5-84.3 112.2c-8.4 9.7-55-1.8-55-1.8s-112.7-26.6-114-34.2c0 0-1.2-2.3-.6-4.9l-13.7-5.7Z"
			/>
			<path
				fill="#FFDFD7"
				fill-rule="nonzero"
				d="M575 310.9s14.9 35.9 28.6 43.7c13.7 7.8 30.4 6.2 40.8-10 10.4-16.2 15.1-73.4 12.9-98.7-2.2-25.3-65-26-73.6-11.5-8.7 14.4-21.5 35.4-8.7 76.5Z"
			/>
			<path
				fill="#5900CC"
				fill-rule="nonzero"
				d="M715.5 1268.3v28.7s24.8 55.6 92 65.1c0 0 4.1-28.4-7.7-38.5-11.8-10.1-37-34-45.9-35.8l-1.4-19.5h-37Z"
			/>
			<path
				fill="#FE8163"
				fill-rule="nonzero"
				d="M587.8 336s-35.9-30.6-36-66.6c-.2-35.8 7.4-48.2 23.3-58.3 15.9-10.1 74.6-20.9 82.1 33 0 0-31.9 7.7-55 .7-5.1-1.5-10.5 1-12.6 5.8l-9.8 35.2-7.6 13.9 15.6 36.3Z"
			/>
			<path
				fill="#FFDFD7"
				fill-rule="nonzero"
				d="M572.1 299.7s-17.5-7.8-13.7-29.4c3.8-21.6 17.6-6.9 21.3 3.1 2.2 6 1.4 11.5 1 13.8-1.1 8.6-8.6 12.5-8.6 12.5Z"
			/>
			<path
				stroke="#FF562F"
				stroke-linecap="round"
				stroke-linejoin="round"
				stroke-width="3"
				d="M587.8 336s-41.2-40.6-40.5-71.2c.5-19.9 6-31.3 13.2-40"
			/>
		</g>
	</svg>
</template>

